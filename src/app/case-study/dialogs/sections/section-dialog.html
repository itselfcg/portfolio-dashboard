<form [formGroup]="form" (submit)="save()">
  <h1 mat-dialog-title>Section</h1>
  <div mat-dialog-content [formGroup]="form">
    <mat-tab-group>
      <mat-tab label="Basic">
        <div class="tab-content">
          <div class="input-space">
            <mat-form-field appearance="fill">
              <mat-label>Type</mat-label>
              <mat-select formControlName="name">
                <mat-option
                  *ngFor="let section of sectionsAvailable "
                  value="{{section}}"
                  >{{section}}</mat-option
                >
              </mat-select>
            </mat-form-field>
            <mat-form-field [style.width.%]="50">
              <input
                matInput
                type="text"
                formControlName="title"
                placeholder="Title"
              />
              <mat-error>Please enter a title.</mat-error>
            </mat-form-field>
          </div>
          <mat-form-field [style.width.%]="100">
            <input
              matInput
              type="text"
              formControlName="content"
              placeholder="Description"
            />
            <mat-error>Please enter an description.</mat-error>
          </mat-form-field>


        </div>
      </mat-tab>
      <mat-tab label="List">
        <div class="tab-content">

          <mat-toolbar-row>
            <span><h3>List</h3></span>
            <span class="example-spacer"></span>
            <button
              type="button"
              mat-icon-button
              color="primary"
              (click)="openItemDialog(null)"
            >
              <mat-icon>add</mat-icon>
            </button>
          </mat-toolbar-row>

          <table
            mat-table
            [dataSource]="itemsDataSource"item
            [style.width.%]="100"
          >
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let item">{{ item }}</td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let item">
                <button
                  type="button"
                  mat-icon-button
                  color="accent"
                  (click)="openItemDialog(item)"
                >
                  <mat-icon>edit</mat-icon>
                </button>
                <button
                  type="button"
                  mat-icon-button
                  (click)="onDeleteListItem(item)"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="itemsColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: itemsColumns"></tr>
          </table>

        </div>
      </mat-tab>
      <mat-tab label="Pictures">
        <div class="tab-content">
          <mat-toolbar-row>
            <span><h3>Pictures</h3></span>
            <span class="example-spacer"></span>
            <button
              type="button"
              mat-icon-button
              color="primary"
              (click)="openPictureDialog(null)"
            >
              <mat-icon>add</mat-icon>
            </button>
          </mat-toolbar-row>

          <table
            mat-table
            [dataSource]="picturesDataSource"
            [style.width.%]="100"
          >
            <ng-container matColumnDef="name">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let picture">{{ picture.fileName }}</td>
            </ng-container>
            <ng-container matColumnDef="description">
              <th mat-header-cell *matHeaderCellDef>Description</th>
              <td mat-cell *matCellDef="let picture">
                {{ picture.description }}
              </td>
            </ng-container>
            <ng-container matColumnDef="actions">
              <th mat-header-cell *matHeaderCellDef>Actions</th>
              <td mat-cell *matCellDef="let picture">
                <button
                  type="button"
                  mat-icon-button
                  color="accent"
                  (click)="openPictureDialog(picture)"
                >
                  <mat-icon>edit</mat-icon>
                </button>
                <button
                  type="button"
                  mat-icon-button
                  (click)="onDeletePicture(picture)"
                >
                  <mat-icon>delete</mat-icon>
                </button>
              </td>
            </ng-container>

            <ng-container matColumnDef="picture">
              <th mat-header-cell *matHeaderCellDef>Url</th>
              <td mat-cell *matCellDef="let picture">
                <img class="image-preview" src="{{ picture.url }}" />
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="picturesColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: picturesColumns"></tr>
          </table>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
  <div mat-dialog-actions align="end">
    <button mat-button (click)="close()">CLOSE</button>
    <button mat-button mat-flat-button type="submit">SAVE</button>
  </div>
</form>
